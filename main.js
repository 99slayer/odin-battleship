(()=>{"use strict";const e=(e,t)=>{for(let n=0;n<11;n+=1){let l=n,a=document.createElement("div");a.classList.add("grid-row"),a.setAttribute("id",`grid-row-${n}`),a.setAttribute("data-row-number",`${n}`);for(let e=0;e<11;e+=1){let n=document.createElement("div");n.classList.add("grid-cell"),n.classList.add(`grid-cell-${t}`),n.setAttribute("id",`grid-cell-${e}-${l}`),n.setAttribute("data-cell-coordinate",`${e}-${l}`),n.style.border="1px solid black",a.appendChild(n)}e.appendChild(a)}(()=>{const t=[];e.childNodes.forEach((e=>{t.push(e.firstChild)}));let n=1;t.forEach((e=>{e.style.border="none","0-0"!==e.getAttribute("data-cell-coordinate")&&(e.textContent=`${n}`,n+=1)}))})(),(()=>{const t=e.firstChild.childNodes;let n=0;t.forEach((e=>{e.style.border="none","0-0"!==e.getAttribute("data-cell-coordinate")&&(e.textContent=`${String.fromCharCode(65+n)}`,n+=1)}))})()},t=(e,t)=>{const n=t.board.fleetCoordinates().reduce(((e,t)=>e.concat(t)));e.forEach((e=>{let l=(e=>{if("string"!=typeof e)return;let t=e.split("");return(e=>{let t;t=isNaN(parseInt(e[1]))?e[0]:e.slice(0,2).join("");let n=parseInt(t);return String.fromCharCode(65+n-1)})(t)+(e=>{let t;return t=isNaN(parseInt(e[e.length-2]))?e[e.length-1]:e.slice(e.length-2).join(""),t})(t)})(e.getAttribute("data-cell-coordinate"));n.includes(l)&&t.board.attacks.includes(l)?e.textContent="●":!n.includes(l)&&t.board.attacks.includes(l)?e.textContent="/":n.includes(l)&&(e.textContent="○")}))},n=(e,t=!1)=>{const n=e,l=(()=>{const e=[],t=[];return{attacks:t,place:t=>{let n=(e=>{let t=e,n=t.length,l=0;return{coordinates:t,hit:()=>{l+=1},isSunk:()=>n===l,getDamage:()=>l}})(t);return e.push(n),n},receiveAttack:n=>{if(t.includes(n))return;let l=e.findIndex((e=>e.coordinates.includes(n)));l>-1&&e[l].hit(),t.push(n)},fleetCoordinates:()=>{const t=[];for(let n=0;n<e.length;n+=1)t.push(e[n].coordinates);return t},getShipsRemaining:()=>{let t=0;return e.forEach((e=>{e.isSunk()&&(t+=1)})),e.length-t},isFleetSunk:()=>!!e.every((e=>e.isSunk()))}})();return{board:l,isTurn:!1,makeAttack:(e,n=null)=>{let l=n;t&&(l=((e,t=1)=>{const n=()=>Math.floor(10*Math.random())+65;let l=String.fromCharCode(n()),a=Math.floor(10*Math.random()+1),r=l+a;if(e.attacks.includes(r))do{l=String.fromCharCode(n()),a=Math.floor(10*Math.random()+1),r=l+a}while(e.attacks.includes(r));return r})(e)),e.attacks.includes(l)?console.log("square has already been hit."):e.receiveAttack(l)},getName:()=>n,getWins:()=>0}};let l,a;const r=document.getElementById("player-one-display"),o=document.getElementById("player-two-display"),d=(e,t)=>{const n=document.createElement("div");n.classList.add("display-cont");const l=document.createElement("h1");l.textContent=`PLAYER ${t}`;const a=document.createElement("h3");a.textContent=`${e.getName()}`;const d=document.createElement("p");d.textContent=`${e.isTurn}`;const c=document.createElement("p");c.textContent=`Ships left: ${e.board.getShipsRemaining()}`;const i=document.createElement("p");i.textContent=`Wins: ${e.getWins()}`,n.append(l,a,d,c,i),1===t?r.append(n):2===t&&o.append(n)},c=document.getElementById("menu-multiplayer"),i=document.getElementById("menu-names"),s=(document.getElementById("menu-rules"),document.getElementById("single-player")),u=document.getElementById("two-player"),m=document.getElementById("player-one-name"),p=document.getElementById("start"),g=e=>{e.style.display="none"},h=e=>{e.style.display=null},E=(s.addEventListener("click",(()=>{g(c),h(i),multiplayer=!1})),u.addEventListener("click",(()=>{g(c),h(i),multiplayer=!0})),p.addEventListener("click",(()=>{let e=[m.value,"computer"],r=e[0],o=e[1];""!==r&&""!==o&&(((e,r)=>{let o=!0;"computer"===r&&(o=!1),l=n(e),a=n(r,o),l.board.place(["A2","A3","A4"]),l.board.place(["E3","F3","G3"]),l.board.place(["A1","B1","C1","D1"]),l.board.place(["C10","D10","E10","F10"]),a.board.place(["A4","B4","C4"]),a.board.place(["A5","A6","A7"]),a.board.place(["E5","F5","G5","H5"]),a.board.place(["E6","E7","E8","E9"]),((e,t)=>{let n=Math.floor(10*Math.random()+1);n%2==0?e.isTurn=!0:n%2!=0&&(t.isTurn=!0)})(l,a),l.makeAttack(a.board,"A4"),l.makeAttack(a.board,"E1"),l.makeAttack(a.board,"E3"),l.makeAttack(a.board,"E5"),l.makeAttack(a.board,"E5"),t(document.querySelectorAll(".grid-cell-1"),l),t(document.querySelectorAll(".grid-cell-2"),a)})(r,o),d(l,1),d(a,2),m.value="",g(i))})),document.getElementById("player-one-grid")),y=document.getElementById("player-two-grid");e(E,1),e(y,2),document.querySelectorAll(".grid-cell").forEach((e=>{e.addEventListener("click",(e=>{console.log(e.target)}))})),console.log("check check")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL0RPTS9jb21wb25lbnRzL2NyZWF0ZUdyaWQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL0RPTS9pbnRlcmFjdGlvbi9ncmlkLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BhcnNlQ2VsbENvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9jcmVhdGVQbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9jcmVhdGVHYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9jcmVhdGVTaGlwLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NldHVwLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ET00vY29tcG9uZW50cy9jcmVhdGVQbGF5ZXJEaXNwbGF5cy5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvRE9NL2ludGVyYWN0aW9uL21lbnUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZUxvb3AuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZmlyc3RUdXJuLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY3JlYXRlR3JpZCA9IChncmlkLGdyaWROdW0pID0+IHtcbiAgZm9yKGxldCBpPTA7aTwxMTtpKz0xKXtcbiAgICBsZXQgcm93ID0gaTtcbiAgICBsZXQgZ3JpZFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGdyaWRSb3cuY2xhc3NMaXN0LmFkZCgnZ3JpZC1yb3cnKTtcbiAgICBncmlkUm93LnNldEF0dHJpYnV0ZSgnaWQnLGBncmlkLXJvdy0ke2l9YCk7XG4gICAgZ3JpZFJvdy5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93LW51bWJlcicsYCR7aX1gKTtcbiAgICAvL1BST0JBQkxZIERPTlQgTkVFRCBJRCBBTkQgREFUQSBBVFRSSUJVVEUsIEJVVCBJJ0xMIENPTUUgQkFDSyBUTyBUSElTLlxuICAgIGZvcihsZXQgaT0wO2k8MTE7aSs9MSl7XG4gICAgICBsZXQgY3VycmVudFJvdyA9IHJvd1xuICAgICAgbGV0IGdyaWRDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBncmlkQ2VsbC5jbGFzc0xpc3QuYWRkKCdncmlkLWNlbGwnKTtcbiAgICAgIGdyaWRDZWxsLmNsYXNzTGlzdC5hZGQoYGdyaWQtY2VsbC0ke2dyaWROdW19YCk7XG4gICAgICBncmlkQ2VsbC5zZXRBdHRyaWJ1dGUoJ2lkJyxgZ3JpZC1jZWxsLSR7aX0tJHtyb3d9YCk7XG4gICAgICBncmlkQ2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC1jb29yZGluYXRlJyxgJHtpfS0ke3Jvd31gKTtcbiAgICAgIGdyaWRDZWxsLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgYmxhY2snO1xuICAgICAgZ3JpZFJvdy5hcHBlbmRDaGlsZChncmlkQ2VsbCk7XG4gICAgfTtcbiAgICBncmlkLmFwcGVuZENoaWxkKGdyaWRSb3cpO1xuICB9O1xuXG4gIGNvbnN0IGxhYmVsUm93cyA9ICgpID0+IHtcbiAgICBjb25zdCBub2RlTGlzdCA9IFtdO1xuICAgIGxldCByb3dzID0gZ3JpZC5jaGlsZE5vZGVzO1xuXG4gICAgcm93cy5mb3JFYWNoKChlKT0+e1xuICAgICAgbm9kZUxpc3QucHVzaChlLmZpcnN0Q2hpbGQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGkgPSAxO1xuICAgIG5vZGVMaXN0LmZvckVhY2goKGUpPT57XG4gICAgICBlLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgIGlmKGUuZ2V0QXR0cmlidXRlKCdkYXRhLWNlbGwtY29vcmRpbmF0ZScpID09PSAnMC0wJyl7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH07XG4gICAgICBlLnRleHRDb250ZW50ID0gYCR7aX1gO1xuICAgICAgaSArPSAxO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGxhYmVsQ29sdW1ucyA9ICgpID0+IHtcbiAgICBjb25zdCBub2RlTGlzdCA9IGdyaWQuZmlyc3RDaGlsZC5jaGlsZE5vZGVzO1xuICAgIGxldCBpID0gMFxuICAgIG5vZGVMaXN0LmZvckVhY2goKGUpPT57XG4gICAgICBlLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgIGNvbnN0IGNlbGxDb29yZGluYXRlID0gZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC1jb29yZGluYXRlJyk7XG4gICAgICBpZihjZWxsQ29vcmRpbmF0ZSA9PT0gJzAtMCcpe1xuICAgICAgICByZXR1cm47XG4gICAgICB9O1xuICAgICAgZS50ZXh0Q29udGVudCA9IGAke1N0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBpKX1gO1xuICAgICAgaSArPSAxO1xuICAgIH0pO1xuICB9O1xuXG4gIGxhYmVsUm93cygpO1xuICBsYWJlbENvbHVtbnMoKTtcbn07XG4iLCJpbXBvcnQgeyBwYXJzZUNlbGxDb29yZGluYXRlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcGFyc2VDZWxsQ29vcmRpbmF0ZVwiO1xuXG5leHBvcnQgY29uc3QgZ3JpZEV2ZW50cyA9ICgpID0+IHtcbiAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZC1jZWxsJyk7XG5cbiAgY2VsbHMuZm9yRWFjaCgobm9kZSk9PntcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSk9PntcbiAgICAgIC8vaWYgcGxheWVyIHR1cm4gdGFrZSBzaG90IGFuZCB2aXN1YWxseSByZXByZXNlbnQgcmVzdWx0XG4gICAgICBjb25zb2xlLmxvZyhlLnRhcmdldCk7XG4gICAgfSk7XG4gIH0pO1xuICBcbn07XG5cbi8vU0hPVUxETidUIFJFTkRFUiBQTEFZRVIgVFdPIFNISVBTIElGIFBMQVlJTkcgQUdBSU5TVCBDT01QVVRFUlxuLy9JRiBUV08gUExBWUVSIFNIT1VMRE5UIFJFTkRFUiBFSVRIRVIgUExBWUVSUyBTSElQU1xuZXhwb3J0IGNvbnN0IHJlbmRlckdyaWQgPSAoY2VsbHMscGxheWVyKSA9PiB7XG4gIGNvbnN0IGZsZWV0ID0gcGxheWVyLmJvYXJkLmZsZWV0Q29vcmRpbmF0ZXMoKTtcbiAgY29uc3QgYXJyID0gZmxlZXQucmVkdWNlKChhY2MsdmFsKT0+YWNjLmNvbmNhdCh2YWwpKTtcblxuICBjZWxscy5mb3JFYWNoKChjZWxsKT0+e1xuICAgIGxldCBjb29yZCA9IHBhcnNlQ2VsbENvb3JkaW5hdGUoY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbC1jb29yZGluYXRlJykpO1xuICAgIGlmIChhcnIuaW5jbHVkZXMoY29vcmQpJiZwbGF5ZXIuYm9hcmQuYXR0YWNrcy5pbmNsdWRlcyhjb29yZCkpIHtcbiAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAn4pePJztcbiAgICB9IGVsc2UgaWYgKCEoYXJyLmluY2x1ZGVzKGNvb3JkKSkmJnBsYXllci5ib2FyZC5hdHRhY2tzLmluY2x1ZGVzKGNvb3JkKSkge1xuICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICcvJztcbiAgICB9IGVsc2UgaWYgKGFyci5pbmNsdWRlcyhjb29yZCkpe1xuICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICfil4snO1xuICAgIH07XG4gIH0pO1xufTtcbiIsIi8vaW5wdXQgY2VsbCBlbGVtZW50IGRhdGEgYXR0cmlidXRlXG4vL291dHB1dCBhdHRhY2sgY29vcmRpbmF0ZXNcbmV4cG9ydCBjb25zdCBwYXJzZUNlbGxDb29yZGluYXRlID0gKGF0dHJpYnV0ZSkgPT4ge1xuICBpZih0eXBlb2YgYXR0cmlidXRlICE9PSAnc3RyaW5nJyl7XG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIGxldCBhcnIgPSBhdHRyaWJ1dGUuc3BsaXQoJycpO1xuXG4gIGNvbnN0IGdldExldHRlciA9IChhcnJheSkgPT4ge1xuICAgIGxldCBsZXR0ZXJWYWx1ZTtcblxuICAgIGlmKCEoaXNOYU4ocGFyc2VJbnQoYXJyYXlbMV0pKSkpe1xuICAgICAgbGV0IHR3b0RpZ2l0ID0gYXJyYXkuc2xpY2UoMCwyKTtcbiAgICAgIGxldHRlclZhbHVlID0gdHdvRGlnaXQuam9pbignJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldHRlclZhbHVlID0gYXJyYXlbMF07XG4gICAgfTtcblxuICAgIGxldCBjb2RlVmFsdWUgPSBwYXJzZUludChsZXR0ZXJWYWx1ZSk7XG4gICAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKDY1ICsgY29kZVZhbHVlKSAtIDEpO1xuICAgIC8vIGNvbnNvbGUubG9nKGxldHRlcik7XG4gICAgcmV0dXJuIGxldHRlcjtcbiAgfTtcblxuICBjb25zdCBnZXROdW1iZXIgPSAoYXJyYXkpID0+IHtcbiAgICBsZXQgbnVtYmVyO1xuICAgIGlmKCEoaXNOYU4ocGFyc2VJbnQoYXJyYXlbYXJyYXkubGVuZ3RoLTJdKSkpKXtcbiAgICAgIGxldCB0d29EaWdpdCA9IGFycmF5LnNsaWNlKGFycmF5Lmxlbmd0aC0yKTtcbiAgICAgIG51bWJlciA9IHR3b0RpZ2l0LmpvaW4oJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBudW1iZXIgPSBhcnJheVthcnJheS5sZW5ndGgtMV07XG4gICAgfTtcbiAgICAvLyBjb25zb2xlLmxvZyhudW1iZXIpO1xuICAgIHJldHVybiBudW1iZXI7XG4gIH07XG5cbiAgbGV0IGxldHRlciA9IGdldExldHRlcihhcnIpO1xuICBsZXQgbnVtYmVyID0gZ2V0TnVtYmVyKGFycik7XG4gIC8vIGNvbnNvbGUubG9nKGxldHRlciArIG51bWJlcik7XG4gIHJldHVybiBsZXR0ZXIgKyBudW1iZXI7XG59O1xuIiwiaW1wb3J0IHsgY3JlYXRlR2FtZWJvYXJkIH0gZnJvbSBcIi4vY3JlYXRlR2FtZWJvYXJkXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQbGF5ZXIgPSAocGxheWVyTmFtZSxpc0NvbXAgPSBmYWxzZSkgPT57XG4gIGNvbnN0IG5hbWUgPSBwbGF5ZXJOYW1lO1xuICBjb25zdCBib2FyZCA9IGNyZWF0ZUdhbWVib2FyZCgpO1xuICBsZXQgaXNUdXJuID0gZmFsc2U7XG4gIGxldCB3aW5zID0gMDtcbiAgXG4gIGNvbnN0IG1ha2VBdHRhY2sgPSAoZW5lbXlCb2FyZCxjb29yZGluYXRlcyA9IG51bGwpID0+IHtcbiAgICBsZXQgdGFyZ2V0ID0gY29vcmRpbmF0ZXM7XG5cbiAgICBpZihpc0NvbXApe1xuICAgICAgdGFyZ2V0ID0gZ2VuZXJhdGVBdHRhY2soZW5lbXlCb2FyZCk7XG4gICAgfTtcblxuICAgIGlmKGVuZW15Qm9hcmQuYXR0YWNrcy5pbmNsdWRlcyh0YXJnZXQpKXtcbiAgICAgIGNvbnNvbGUubG9nKCdzcXVhcmUgaGFzIGFscmVhZHkgYmVlbiBoaXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfTtcbiAgICBlbmVteUJvYXJkLnJlY2VpdmVBdHRhY2sodGFyZ2V0KTtcbiAgfTtcblxuICAvL3dlJ2xsIHBsYWNlIDUgc2hpcHMgYnkgZGVmYXVsdC5cbiAgY29uc3QgcGxhY2VGbGVldCA9ICgpID0+IHtcblxuICB9O1xuICBcbiAgY29uc3QgZ2VuZXJhdGVBdHRhY2sgPSAoZW5lbXlCb2FyZCxnZW4gPSAxKSA9PiB7XG4gICAgLy9jb3VsZCBwb3RlbnRpYWxseSBtYWtlIGl0ICdzbWFydGVyJyBsYXRlciBvbiBha2EsIG9uY2UgaXQgbGFuZHMgYSBoaXQsIGZvY3VzIG9uIHRoYXQgYXJlYSB1bnRpbCB0aGUgc2hpcCBpcyBzdW5rLlxuICAgIGNvbnN0IGdlbmVyYXRlQ2hhckNvZGUgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDc0IC0gNjUgKyAxKSApICsgNjU7XG4gICAgfTtcblxuICAgIGxldCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGdlbmVyYXRlQ2hhckNvZGUoKSk7XG4gICAgbGV0IG51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwICsgMSk7XG4gICAgbGV0IHRhcmdldCA9IGxldHRlciArIG51bWJlcjtcblxuICAgIC8vY2hlY2tzIGlmIHNxdWFyZXMgaGF2ZSBhbHJlYWR5IGJlZW4gaGl0XG4gICAgaWYoZW5lbXlCb2FyZC5hdHRhY2tzLmluY2x1ZGVzKHRhcmdldCkpe1xuICAgICAgZG97XG4gICAgICAgIGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZ2VuZXJhdGVDaGFyQ29kZSgpKTtcbiAgICAgICAgbnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAgKyAxKTtcbiAgICAgICAgdGFyZ2V0ID0gbGV0dGVyICsgbnVtYmVyO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGVuZW15Qm9hcmQuYXR0YWNrcy5pbmNsdWRlcyh0YXJnZXQpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICBjb25zdCBnZXROYW1lID0gKCkgPT4ge1xuICAgIHJldHVybiBuYW1lO1xuICB9O1xuXG4gIGNvbnN0IGdldFdpbnMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHdpbnM7XG4gIH07XG5cbiAgcmV0dXJuIHsgYm9hcmQsIGlzVHVybiwgbWFrZUF0dGFjaywgZ2V0TmFtZSwgZ2V0V2lucyB9O1xufTtcbiIsIi8vZ2FtZWJvYXJkIHNob3VsZCBiZSAxMHgxMCAoQS1KKSBhbmQgKDEtMTApXG5cbmltcG9ydCB7IGNyZWF0ZVNoaXAgfSBmcm9tIFwiLi9jcmVhdGVTaGlwXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVHYW1lYm9hcmQgPSAoKSA9PntcbiAgY29uc3Qgc2hpcHMgPSBbXTtcbiAgY29uc3QgYXR0YWNrcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIE9MRHBsYWNlKGF4aXMsc3RhcnQsc2l6ZSl7XG4gICAgLy9YID0+IGhvcml6b250YWwgKyBsZXR0ZXJzXG4gICAgLy9ZID0+IHZlcnRpY2FsICsgbnVtYmVyc1xuICAgIGlmKCFheGlzfHwhc3RhcnR8fCFzaXplKXtcbiAgICAgIGNvbnNvbGUubG9nKCdwYXJhbWV0ZXIgbWlzc2luZycpO1xuICAgICAgcmV0dXJuO1xuICAgIH07XG5cbiAgICBsZXQgc3RhcnRBcnIgPSBzdGFydC5zcGxpdCgnJyk7XG4gICAgbGV0IHggPSBzdGFydEFyci5zbGljZSgwLDEpO1xuICAgIGxldCB5ID0gc3RhcnRBcnIuc2xpY2UoMSkuam9pbignJyk7XG5cbiAgICAvL3Rocm93cyBlcnJvciBpZiBzaGlwcyB3b3VsZCBiZSBwbGFjZWQgb3V0IG9mIGJvdW5kc1xuICAgIC8vdGhyb3dzIGVycm9ycyBmb3Igbm93IG1heWJlIGNoYW5nZSBsYXRlcioqXG4gICAgLy9USEUgQ09PUkRJTkFURVMgQ0FOIEJFIENIRUNLRUQgQkVGT1JFIFRIRVkgQVJFIFBBU1NFRCBUTyBQTEFDRSoqXG4gICAgaWYoKHhbMF0uY2hhckNvZGVBdCgwKStzaXplKT43NCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NoaXAgZXhjZWVkcyB0aGUgeCBheGlzIG9mIHRoZSBnYW1lYm9hcmQuJyk7XG4gICAgfSBlbHNlIGlmICgocGFyc2VJbnQoeSkrc2l6ZSk+MTApe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaGlwIGV4Y2VlZHMgdGhlIHkgYXhpcyBvZiB0aGUgZ2FtZWJvYXJkLicpO1xuICAgIH07XG5cbiAgICAvL0NoZWNrIGlmIHBsYWNlbWVudCBjb29yZGluYXRlcyBjb25mbGljdCB3aXRoIGFueSBvdGhlciBzaGlwc1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29vcmRpbmF0ZXMoc2hpcEF4aXMsc2hpcFNpemUpe1xuICAgICAgbGV0IGNvb3JkaW5hdGVzID0gW107XG5cbiAgICAgIGlmKHNoaXBBeGlzID09PSAnWCcpe1xuICAgICAgICAvL2luY3JlbWVudCBsZXR0ZXJzXG4gICAgICAgIGZvcihsZXQgaT0wO2k8c2hpcFNpemU7aSs9MSl7XG4gICAgICAgICAgbGV0IG5ld1ggPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHhbMF0uY2hhckNvZGVBdCgwKStpKTtcbiAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGAke25ld1ggKyB5fWApO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChzaGlwQXhpcyA9PT0gJ1knKXtcbiAgICAgICAgLy9pbmNyZW1lbnQgbnVtYmVyc1xuICAgICAgICBmb3IobGV0IGk9MDtpPHNoaXBTaXplO2krPTEpe1xuICAgICAgICAgIGNvb3JkaW5hdGVzLnB1c2goYCR7eCArIChwYXJzZUludCh5KSArIGkpfWApO1xuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xuICAgIH07XG5cblxuICAgIGxldCBzaGlwID0gY3JlYXRlU2hpcChjcmVhdGVDb29yZGluYXRlcyhheGlzLHNpemUpKTtcbiAgICBzaGlwcy5wdXNoKHNoaXApO1xuICB9OyAvL09MRCBQTEFDRSBGVU5DVElPTiwgU1RJTEwgVVNFRlVMIENPREUgSU4gSEVSRSBGT1IgTEFURVIqKlxuXG4gIGNvbnN0IHBsYWNlID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgbGV0IG5ld1NoaXAgPSBjcmVhdGVTaGlwKGNvb3JkaW5hdGVzKTtcbiAgICBzaGlwcy5wdXNoKG5ld1NoaXApO1xuICAgIHJldHVybiBuZXdTaGlwO1xuICB9XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh0YXJnZXQpID0+IHtcbiAgICBpZihhdHRhY2tzLmluY2x1ZGVzKHRhcmdldCkpe1xuICAgICAgcmV0dXJuO1xuICAgIH07XG5cbiAgICBsZXQgc2hpcEluZGV4ID0gc2hpcHMuZmluZEluZGV4KChzaGlwKT0+eyByZXR1cm4gc2hpcC5jb29yZGluYXRlcy5pbmNsdWRlcyh0YXJnZXQpfSk7XG5cbiAgICBpZihzaGlwSW5kZXg+LTEpe1xuICAgICAgc2hpcHNbc2hpcEluZGV4XS5oaXQoKTtcbiAgICB9O1xuXG4gICAgYXR0YWNrcy5wdXNoKHRhcmdldCk7XG4gICAgLy8gcmV0dXJuIGlmIHNoaXAgd2FzIGhpdC93aGljaCBzaGlwIHdhcyBoaXQ/XG4gIH07XG4gIFxuICBjb25zdCBmbGVldENvb3JkaW5hdGVzID0gKCkgPT57XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yKGxldCBpPTA7aTxzaGlwcy5sZW5ndGg7aSs9MSl7XG4gICAgICBhcnIucHVzaChzaGlwc1tpXS5jb29yZGluYXRlcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBhcnI7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2hpcHNSZW1haW5pbmcgPSAoKSA9PiB7XG4gICAgbGV0IHNoaXBzU3VuayA9IDA7XG5cbiAgICBzaGlwcy5mb3JFYWNoKChzaGlwKT0+e1xuICAgICAgaWYoc2hpcC5pc1N1bmsoKSl7XG4gICAgICAgIHNoaXBzU3VuayArPSAxO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzaGlwcy5sZW5ndGggLSBzaGlwc1N1bms7XG4gIH07XG5cbiAgY29uc3QgaXNGbGVldFN1bmsgPSAoKSA9PiB7XG4gICAgaWYoc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLmlzU3VuaygpKSl7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIHsgYXR0YWNrcywgcGxhY2UsIHJlY2VpdmVBdHRhY2ssIGZsZWV0Q29vcmRpbmF0ZXMsIGdldFNoaXBzUmVtYWluaW5nLCBpc0ZsZWV0U3VuayB9O1xufTsiLCJleHBvcnQgY29uc3QgY3JlYXRlU2hpcCA9IChjb29yZGluYXRlQXJyYXkpID0+e1xuICBsZXQgY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlQXJyYXk7XG4gIGxldCBsZW5ndGggPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gIGxldCBkYW1hZ2UgPSAwO1xuXG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICBkYW1hZ2UgKz0gMTtcbiAgfTtcblxuICBjb25zdCBpc1N1bmsgPSAoKSA9PiB7XG4gICAgaWYobGVuZ3RoID09PSBkYW1hZ2Upe1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGdldERhbWFnZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZGFtYWdlO1xuICB9O1xuXG4gIHJldHVybiB7IGNvb3JkaW5hdGVzLCBoaXQsIGlzU3VuaywgZ2V0RGFtYWdlIH07XG59O1xuIiwiaW1wb3J0IHsgY3JlYXRlUGxheWVyIH0gZnJvbSBcIi4uL2ZhY3Rvcmllcy9jcmVhdGVQbGF5ZXJcIjtcbmltcG9ydCB7IHJlbmRlckdyaWQgfSBmcm9tIFwiLi4vRE9NL2ludGVyYWN0aW9uL2dyaWRcIjtcbmltcG9ydCB7IGZpcnN0VHVybiB9IGZyb20gXCIuL2ZpcnN0VHVyblwiO1xuXG5leHBvcnQgbGV0IHBsYXllck9uZSxwbGF5ZXJUd287XG5cbmV4cG9ydCBjb25zdCBzZXR1cCA9IChuYW1lT25lLCBuYW1lVHdvKSA9PiB7XG4gIGxldCB4ID0gdHJ1ZTtcblxuICBpZihuYW1lVHdvID09PSAnY29tcHV0ZXInKXtcbiAgICB4ID0gZmFsc2U7XG4gIH07XG4gIFxuICBwbGF5ZXJPbmUgPSBjcmVhdGVQbGF5ZXIobmFtZU9uZSk7XG4gIHBsYXllclR3byA9IGNyZWF0ZVBsYXllcihuYW1lVHdvLHgpO1xuXG4gIC8vdGVtcG9yYXJ5IHBsYWNlbWVudCBzZXR1cFxuICBwbGF5ZXJPbmUuYm9hcmQucGxhY2UoWydBMicsJ0EzJywnQTQnXSk7XG4gIHBsYXllck9uZS5ib2FyZC5wbGFjZShbJ0UzJywnRjMnLCdHMyddKTtcbiAgcGxheWVyT25lLmJvYXJkLnBsYWNlKFsnQTEnLCdCMScsJ0MxJywnRDEnXSk7XG4gIHBsYXllck9uZS5ib2FyZC5wbGFjZShbJ0MxMCcsJ0QxMCcsJ0UxMCcsJ0YxMCddKTtcblxuICBwbGF5ZXJUd28uYm9hcmQucGxhY2UoWydBNCcsJ0I0JywnQzQnXSk7XG4gIHBsYXllclR3by5ib2FyZC5wbGFjZShbJ0E1JywnQTYnLCdBNyddKTtcbiAgcGxheWVyVHdvLmJvYXJkLnBsYWNlKFsnRTUnLCdGNScsJ0c1JywnSDUnXSk7XG4gIHBsYXllclR3by5ib2FyZC5wbGFjZShbJ0U2JywnRTcnLCdFOCcsJ0U5J10pO1xuXG4gIC8vIHJlbmRlckdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdyaWQtY2VsbC0xJykscGxheWVyT25lKTtcbiAgLy8gcmVuZGVyR3JpZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZC1jZWxsLTInKSxwbGF5ZXJUd28pO1xuXG4gIGZpcnN0VHVybihwbGF5ZXJPbmUscGxheWVyVHdvKTtcblxuICBwbGF5ZXJPbmUubWFrZUF0dGFjayhwbGF5ZXJUd28uYm9hcmQsJ0E0Jyk7XG4gIHBsYXllck9uZS5tYWtlQXR0YWNrKHBsYXllclR3by5ib2FyZCwnRTEnKTtcbiAgcGxheWVyT25lLm1ha2VBdHRhY2socGxheWVyVHdvLmJvYXJkLCdFMycpO1xuICBwbGF5ZXJPbmUubWFrZUF0dGFjayhwbGF5ZXJUd28uYm9hcmQsJ0U1Jyk7XG4gIHBsYXllck9uZS5tYWtlQXR0YWNrKHBsYXllclR3by5ib2FyZCwnRTUnKTtcblxuICByZW5kZXJHcmlkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ncmlkLWNlbGwtMScpLHBsYXllck9uZSk7XG4gIHJlbmRlckdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdyaWQtY2VsbC0yJykscGxheWVyVHdvKTtcbn07XG5cbiIsImNvbnN0IHBsYXllck9uZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLW9uZS1kaXNwbGF5Jyk7XG5jb25zdCBwbGF5ZXJUd29EaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci10d28tZGlzcGxheScpO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUGxheWVyRGlzcGxheSA9IChwbGF5ZXIsIHBsYXllck51bSkgPT4ge1xuICBjb25zdCBkaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpc3BsYXkuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1jb250Jyk7XG5cbiAgY29uc3QgcGxheWVyTnVtRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gIHBsYXllck51bURpc3BsYXkudGV4dENvbnRlbnQgPSBgUExBWUVSICR7cGxheWVyTnVtfWA7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICBuYW1lLnRleHRDb250ZW50ID0gYCR7cGxheWVyLmdldE5hbWUoKX1gO1xuXG4gIGNvbnN0IHR1cm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHR1cm4udGV4dENvbnRlbnQgPSBgJHtwbGF5ZXIuaXNUdXJufWA7XG4gIC8vbWF5YmUgdXNlIHNvbWUgb3RoZXIgd2F5IHRvIGRpc3BsYXkgd2hvcyB0dXJuIGl0IGlzPz8qKlxuXG4gIGNvbnN0IHNoaXBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBzaGlwcy50ZXh0Q29udGVudCA9IGBTaGlwcyBsZWZ0OiAke3BsYXllci5ib2FyZC5nZXRTaGlwc1JlbWFpbmluZygpfWA7XG4gIGNvbnN0IHdpbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHdpbnMudGV4dENvbnRlbnQgPSBgV2luczogJHtwbGF5ZXIuZ2V0V2lucygpfWA7XG5cbiAgZGlzcGxheS5hcHBlbmQocGxheWVyTnVtRGlzcGxheSxuYW1lLHR1cm4sc2hpcHMsd2lucyk7XG5cbiAgaWYocGxheWVyTnVtID09PSAxKXtcbiAgICBwbGF5ZXJPbmVEaXNwbGF5LmFwcGVuZChkaXNwbGF5KTtcbiAgfSBlbHNlIGlmIChwbGF5ZXJOdW0gPT09IDIpe1xuICAgIHBsYXllclR3b0Rpc3BsYXkuYXBwZW5kKGRpc3BsYXkpO1xuICB9O1xufTtcblxuLy9wbGF5ZXIjXG4vL3BsYXllciBuYW1lXG4vL2lzIHR1cm5cbi8vY3VycmVudCBzaGlwcyBhbGl2ZVxuLy93aW5zIiwiLy90aGlzIGZpbGUgaXMgdGhlIG1vZHVsZSwgbm8gbmVlZCB0byBtYWtlIGEgXCJtb2R1bGUgb2JqZWN0XCJcbi8vbWVudSBtdWx0aXBsYXllclxuLy9tZW51IG5hbWVzXG4vL21lbnUgcnVsZXNcbmltcG9ydCB7IHNldHVwIH0gZnJvbSAnLi4vLi4vbW9kdWxlcy9zZXR1cCc7XG5pbXBvcnQgeyBwbGF5ZXJPbmUsIHBsYXllclR3byB9IGZyb20gJy4uLy4uL21vZHVsZXMvc2V0dXAnO1xuaW1wb3J0IHsgY3JlYXRlUGxheWVyRGlzcGxheSB9IGZyb20gJy4uL2NvbXBvbmVudHMvY3JlYXRlUGxheWVyRGlzcGxheXMnO1xuXG5jb25zdCBtZW51TXVsdGlwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1tdWx0aXBsYXllcicpO1xuY29uc3QgbWVudU5hbWVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtbmFtZXMnKTtcbmNvbnN0IG1lbnVSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LXJ1bGVzJyk7XG5cbmNvbnN0IHNpbmdsZVBsYXllckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW5nbGUtcGxheWVyJyk7XG5jb25zdCB0d29QbGF5ZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHdvLXBsYXllcicpO1xuXG5jb25zdCBwbGF5ZXJPbmVOYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLW9uZS1uYW1lJyk7XG4vLyBjb25zdCBwbGF5ZXJUd29OYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci10d28tbmFtZScpO1xuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQnKTtcblxuLy8gbGV0IG11bHRpcGxheWVyID0gZmFsc2U7XG5cbmNvbnN0IGhpZGUgPSAobWVudSkgPT4ge1xuICBtZW51LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59O1xuXG5jb25zdCBzaG93ID0gKG1lbnUpID0+IHtcbiBtZW51LnN0eWxlLmRpc3BsYXkgPSBudWxsO1xufTtcblxuY29uc3QgZ2V0TmFtZXMgPSAoKSA9PiB7XG4gIGxldCBwbGF5ZXJPbmUgPSBwbGF5ZXJPbmVOYW1lRWwudmFsdWU7XG4gIGxldCBwbGF5ZXJUd28gPSAnY29tcHV0ZXInO1xuICAvLyBpZighbXVsdGlwbGF5ZXIpe1xuICAvLyAgIHBsYXllclR3byA9ICdjb21wdXRlcic7XG4gIC8vIH07XG5cbiAgcmV0dXJuIFtwbGF5ZXJPbmUsIHBsYXllclR3b107XG59O1xuXG4vL21lbnUgaW50ZXJhY3Rpb24gZXZlbnRzXG5leHBvcnQgY29uc3QgbWVudUV2ZW50cyA9ICgoKSA9PiB7XG5cbiAgc2luZ2xlUGxheWVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xuICAgIGhpZGUobWVudU11bHRpcGxheWVyKTtcbiAgICBzaG93KG1lbnVOYW1lcyk7XG4gICAgbXVsdGlwbGF5ZXIgPSBmYWxzZTtcbiAgfSk7XG5cbiAgdHdvUGxheWVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xuICAgIGhpZGUobWVudU11bHRpcGxheWVyKTtcbiAgICBzaG93KG1lbnVOYW1lcyk7XG4gICAgbXVsdGlwbGF5ZXIgPSB0cnVlO1xuICB9KTtcblxuICBzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcbiAgICAvLyhzaG91bGQgdHJpZ2dlciBvbiBoaXR0aW5nIGVudGVyIGFsc28sIG5vdCBqdXN0IGNsaWNrLilcbiAgICAvL2NyZWF0ZSBwbGF5ZXJzIHdpdGggbmFtZXNcbiAgICBsZXQgbmFtZXMgPSBnZXROYW1lcygpO1xuICAgIGxldCBuYW1lT25lID0gbmFtZXNbMF07XG4gICAgbGV0IG5hbWVUd28gPSBuYW1lc1sxXVxuXG4gICAgaWYobmFtZU9uZSA9PT0gJycgfHwgbmFtZVR3byA9PT0gJycpe1xuICAgICAgcmV0dXJuO1xuICAgIH07XG5cbiAgICBzZXR1cChuYW1lT25lLG5hbWVUd28pO1xuICAgIGNyZWF0ZVBsYXllckRpc3BsYXkocGxheWVyT25lLDEpO1xuICAgIGNyZWF0ZVBsYXllckRpc3BsYXkocGxheWVyVHdvLDIpO1xuICAgIC8vIGNvbnNvbGUubG9nKHBsYXllck9uZS5ib2FyZC5mbGVldENvb3JkaW5hdGVzKCkpO1xuICAgIC8vIGNvbnNvbGUubG9nKHBsYXllclR3by5ib2FyZC5mbGVldENvb3JkaW5hdGVzKCkpO1xuICAgIHBsYXllck9uZU5hbWVFbC52YWx1ZSA9ICcnO1xuICAgIC8vIHBsYXllclR3b05hbWUudmFsdWUgPSAnJztcbiAgICBoaWRlKG1lbnVOYW1lcyk7XG5cbiAgfSk7XG4gIFxufSkoKTsiLCJpbXBvcnQgeyBjcmVhdGVHcmlkIH0gZnJvbSBcIi4uL0RPTS9jb21wb25lbnRzL2NyZWF0ZUdyaWRcIlxuaW1wb3J0IHsgZ3JpZEV2ZW50cyB9IGZyb20gXCIuLi9ET00vaW50ZXJhY3Rpb24vZ3JpZFwiO1xuaW1wb3J0IHsgbWVudUV2ZW50cyB9IGZyb20gXCIuLi9ET00vaW50ZXJhY3Rpb24vbWVudVwiO1xuaW1wb3J0IHsgcGxheWVyT25lLCBwbGF5ZXJUd28gfSBmcm9tIFwiLi9zZXR1cFwiO1xuXG4vL1NFVCBVUFxuY29uc3QgcGxheWVyT25lR3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXItb25lLWdyaWQnKTtcbmNvbnN0IHBsYXllclR3b0dyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLXR3by1ncmlkJyk7XG5cbmNyZWF0ZUdyaWQocGxheWVyT25lR3JpZCwxKTtcbmNyZWF0ZUdyaWQocGxheWVyVHdvR3JpZCwyKTtcbmdyaWRFdmVudHMoKTtcblxuLy9kZWNpZGUgd2hvIGdvZXMgZmlyc3QgKHBsYXllciBvbmUgZ29lcyBmaXJzdD8pXG4vL3R1cm4gZnVuY3Rpb25cblxuLy9GSUdVUkUgT1VUIFRVUk5TIE5FWFRcblxuLy9WIExPT1AgVlxuLy9hbHRlcm5hdGUgdHVybnMgdW50aWwgdGhlcmUncyBhIHdpbm5lclxuLy9hZGQgd2luIHRvIHRoYXQgcGxheWVyXG4vL2xvb3NpbmcgcGxheWVyIGdldHMgdG8gZ28gZmlyc3RcblxuLy9pZiBpbXBsZW1lbnRlZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gcmVzdGFydCBhIGdhbWUgb3IgY2hhbmdlIHRoZSBydWxlcyBhdCBhbnl0aW1lXG4iLCJleHBvcnQgY29uc3QgZmlyc3RUdXJuID0gKGZpcnN0UGxheWVyLCBzZWNvbmRQbGF5ZXIpID0+IHtcbiAgbGV0IG51bWJlciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcblxuICBpZihudW1iZXIlMiA9PT0gMCl7XG4gICAgZmlyc3RQbGF5ZXIuaXNUdXJuID0gdHJ1ZTtcbiAgfSBlbHNlIGlmIChudW1iZXIlMiAhPT0gMCl7XG4gICAgc2Vjb25kUGxheWVyLmlzVHVybiA9IHRydWU7XG4gIH07XG59OyIsImNvbnNvbGUubG9nKCdjaGVjayBjaGVjaycpXG5pbXBvcnQgJy4vbW9kdWxlcy9nYW1lTG9vcCc7XG4iXSwibmFtZXMiOlsiY3JlYXRlR3JpZCIsImdyaWQiLCJncmlkTnVtIiwiaSIsInJvdyIsImdyaWRSb3ciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJncmlkQ2VsbCIsInN0eWxlIiwiYm9yZGVyIiwiYXBwZW5kQ2hpbGQiLCJub2RlTGlzdCIsImNoaWxkTm9kZXMiLCJmb3JFYWNoIiwiZSIsInB1c2giLCJmaXJzdENoaWxkIiwiZ2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJsYWJlbFJvd3MiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJsYWJlbENvbHVtbnMiLCJyZW5kZXJHcmlkIiwiY2VsbHMiLCJwbGF5ZXIiLCJhcnIiLCJib2FyZCIsImZsZWV0Q29vcmRpbmF0ZXMiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJjb25jYXQiLCJjZWxsIiwiY29vcmQiLCJhdHRyaWJ1dGUiLCJzcGxpdCIsImFycmF5IiwibGV0dGVyVmFsdWUiLCJpc05hTiIsInBhcnNlSW50Iiwic2xpY2UiLCJqb2luIiwiY29kZVZhbHVlIiwiZ2V0TGV0dGVyIiwibnVtYmVyIiwibGVuZ3RoIiwiZ2V0TnVtYmVyIiwicGFyc2VDZWxsQ29vcmRpbmF0ZSIsImluY2x1ZGVzIiwiYXR0YWNrcyIsImNyZWF0ZVBsYXllciIsInBsYXllck5hbWUiLCJpc0NvbXAiLCJuYW1lIiwic2hpcHMiLCJwbGFjZSIsImNvb3JkaW5hdGVzIiwibmV3U2hpcCIsImNvb3JkaW5hdGVBcnJheSIsImRhbWFnZSIsImhpdCIsImlzU3VuayIsImdldERhbWFnZSIsImNyZWF0ZVNoaXAiLCJyZWNlaXZlQXR0YWNrIiwidGFyZ2V0Iiwic2hpcEluZGV4IiwiZmluZEluZGV4Iiwic2hpcCIsImdldFNoaXBzUmVtYWluaW5nIiwic2hpcHNTdW5rIiwiaXNGbGVldFN1bmsiLCJldmVyeSIsImNyZWF0ZUdhbWVib2FyZCIsImlzVHVybiIsIm1ha2VBdHRhY2siLCJlbmVteUJvYXJkIiwiZ2VuIiwiZ2VuZXJhdGVDaGFyQ29kZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxldHRlciIsImdlbmVyYXRlQXR0YWNrIiwiY29uc29sZSIsImxvZyIsImdldE5hbWUiLCJnZXRXaW5zIiwicGxheWVyT25lIiwicGxheWVyVHdvIiwicGxheWVyT25lRGlzcGxheSIsImdldEVsZW1lbnRCeUlkIiwicGxheWVyVHdvRGlzcGxheSIsImNyZWF0ZVBsYXllckRpc3BsYXkiLCJwbGF5ZXJOdW0iLCJkaXNwbGF5IiwicGxheWVyTnVtRGlzcGxheSIsInR1cm4iLCJ3aW5zIiwiYXBwZW5kIiwibWVudU11bHRpcGxheWVyIiwibWVudU5hbWVzIiwic2luZ2xlUGxheWVyQnRuIiwidHdvUGxheWVyQnRuIiwicGxheWVyT25lTmFtZUVsIiwic3RhcnRCdG4iLCJoaWRlIiwibWVudSIsInNob3ciLCJwbGF5ZXJPbmVHcmlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm11bHRpcGxheWVyIiwibmFtZXMiLCJ2YWx1ZSIsIm5hbWVPbmUiLCJuYW1lVHdvIiwieCIsImZpcnN0UGxheWVyIiwic2Vjb25kUGxheWVyIiwiZmlyc3RUdXJuIiwicXVlcnlTZWxlY3RvckFsbCIsInNldHVwIiwicGxheWVyVHdvR3JpZCIsIm5vZGUiXSwic291cmNlUm9vdCI6IiJ9